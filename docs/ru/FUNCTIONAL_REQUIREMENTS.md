# Функциональные требования к системе шаблонов тестовых заданий

Этот документ описывает функциональные требования к коллекции шаблонов для интерактивных тестовых заданий.

## 1. Общие (глобальные) требования

-   **1.1. Разделение данных и логики**: Система **должна** отделять логику отображения и проверки (JavaScript) от контента задания (JSON).
-   **1.2. Клиентская сторона**: Все шаблоны **должны** работать исключительно на стороне клиента (в браузере).
-   **1.3. Запуск через веб-сервер**: Для корректной работы механизма загрузки JSON-файлов (`fetch` API) система требует запуска через локальный веб-сервер.
-   **1.4. Блокировка после ответа**: После нажатия кнопки "Проверить ответ", система **должна** выполнить следующие действия:
    -   Кнопка "Проверить ответ" **должна** исчезнуть.
    -   Все элементы управления для ввода ответа **должны** быть заблокированы (`disabled`).

## 2. Требования к интернационализации (i18n)

-   **2.1. Определение языка**: Система **должна** определять язык пользователя в следующем порядке приоритета:
    1.  Из параметра `lang` в URL (например, `?lang=en`). Поддерживаемые значения: `ru`, `en`.
    2.  Из настроек языка браузера пользователя (`navigator.language`).
    3.  Если язык не определен или не поддерживается, используется язык по умолчанию — английский (`en`).
-   **2.2. Локализация интерфейса**:
    -   Все строки интерфейса (текст на кнопках, сообщения о результате и ошибках) **должны** храниться в отдельных JSON-файлах в папке `quiz-engine/locales/` (например, `ru.json`, `en.json`).
    -   Движок **должен** загружать соответствующий файл локализации перед построением теста.
-   **2.3. Локализация контента**:
    -   Все текстовые поля в файле `quiz-data.json`, предназначенные для отображения пользователю (`question`, `answers.text`, `answers.description`, `explanation`), **должны** поддерживать мультиязычность.
    -   Эти поля **должны** быть объектами, где ключ — это код языка (например, `ru`, `en`), а значение — строка на этом языке.
    -   Пример: `"question": { "ru": "Вопрос", "en": "Question" }`.

## 3. Требования к типам заданий

### 3.1. Тест с одним правильным ответом (Single Choice)

-   **3.1.1. Основной функционал**:
    -   Для выбора ответа **должны** использоваться радиокнопки (`<input type="radio">`).
    -   Ответ считается правильным, если для выбранного варианта в `quiz-data.json` поле `correct` имеет значение `true`.
-   **3.1.2. Расширение (Показ объяснений)**:
    -   Конфигурация **должна** управляться параметром `showExplanation` в `config` объекта `quiz-data.json`.
    -   `"selected"`: после проверки отобразить `description` только для выбранного пользователем варианта.
    -   `"all"`: после проверки отобразить `description` для **каждого** варианта ответа.

### 3.2. Тест с несколькими правильными ответами (Multiple Choice)

-   **3.2.1. Основной функционал**:
    -   Для выбора ответов **должны** использоваться чекбоксы (`<input type="checkbox">`).
    -   Ответ считается правильным, **только если** набор выбр��нных пользователем вариантов в точности совпадает с набором всех вариантов, у которых поле `correct` имеет значение `true`.
-   **3.2.2. Расширение (Показ объяснений)**: Аналогично тесту с одним ответом, управляется параметром `showExplanation`.

### 3.3. Тест с полем для ввода ответа (Input Field)

-   **3.3.1. Общее**: Перед проверкой система **должна** удалять начальные и конечные пробелы из введенной строки.
-   **3.3.2. Конфигурация**: Поведение **должно** управляться параметрами в `config` объекта `quiz-data.json`:
    -   `caseSensitive: true`: сравнение с эталоном `answer` **чувствительно** к регистру.
    -   `caseSensitive: false`: сравнение **нечувствительно** к регистру.
    -   `showExplanationOnError: true`: если ответ неверен, показать текст из поля `explanation`.